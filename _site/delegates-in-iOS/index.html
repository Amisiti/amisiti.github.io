<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Delegation in iOS</title>
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="Joe is a software engineer living in lower manhattan that specializes in machine learning, statistics, python, and computer vision.">
	<link rel="canonical" href="/delegates-in-iOS">
	
	<link href='//fonts.googleapis.com/css?family=Titillium+Web:400,200|Lato:300,400,700|Pacifico' rel='stylesheet' type='text/css' />
	
	<!-- Custom CSS -->
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/icons.css">
	<script type="text/javascript"
	    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
        
    <!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
    for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
    mixpanel.init("4a9ea1c313c2d3a01e19ad4f9558dba4");</script><!-- end Mixpanel -->
</head>

	
	<body>
		<header class="site-header">
	<div class="wrap">
		<a class="site-title" href="/">
		</a>
		<nav class="site-nav">
			<div class="trigger">
			</div>
		</nav>
	</div>
</header>
		
		<div class="page-content">
			<div class="wrap">
				<div class="post" style="padding:1.85em 0.75em;">
	<a class="home-link" href="/">Back To Blog Posts</a>
    <header class="post-header">
		<p class="meta">Dec 6, 2014
            </p>
		
		<h1>Delegation in iOS</h1>
	</header>
	
	<article class="post-content">
		<p>If you are new to iOS programming, one design pattern that you are going to need to quickly learn is <a href="http://programmers.stackexchange.com/questions/190359/what-is-delegation-and-why-is-it-important-in-ios-programming">delegation</a>: Delegates are an object oriented versions of callbacks (or that is how I like to think about them anyways). Whereas a callback is a function which is defined before an event, and is called every time an event occurs, a delegate is an object that acts on behalf of, or in coordination with, another object when that object encounters an event in a program.</p>

<p>The easiest way to explain this is to look at a simple example in <code>javascript</code> and in then in <code>objective-c</code>:</p>

<p>Lets say you want to write a <strong>very</strong> simple key logger, which dumps any key strokes to standard out.</p>

<p>In <code>javascript</code>, this can be done very easily utilizing jQuery:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keyup&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span><span class="p">)</span>
<span class="p">})</span></code></pre></div>

<p>In this example, the callback <code>function(e)</code> will be called anytime a keyboard key is pressed. (Yes, I know it only works if you are in a browser, but I am trying to write a trival example)</p>

<p>In objective C, the same thing can be accomplished through delegation:</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="cp">#import &lt;UIKit/UIKit.h&gt;</span>

<span class="k">@interface</span> <span class="nc">SomeClass</span> : <span class="bp">UIViewController</span> <span class="o">&lt;</span><span class="bp">UITextViewDelegate</span><span class="p">,</span> <span class="bp">UITextFieldDelegate</span><span class="o">&gt;</span>

<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">,</span> <span class="k">readonly</span><span class="p">)</span> <span class="n">SAMTextField</span><span class="o">*</span> <span class="n">someTextField</span><span class="p">;</span>

<span class="k">@end</span></code></pre></div>

<p>The first thing to notice here is SomeClass is conforming to the <code>UITextFieldDelegate</code> and
<code>UITextViewDelegate</code> protocols. Also notice this view contains a single text field, a <a href="https://github.com/soffes/SAMTextField">SAMTextField</a> to be exact.</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="lineno"> 1</span> <span class="k">@implementation</span> <span class="nc">SomeClass</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="p">-(</span><span class="n">SAMTextField</span><span class="o">*</span><span class="p">)</span> <span class="nf">firstName</span> <span class="p">{</span>
<span class="lineno"> 4</span>     <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">_someTextField</span><span class="p">){</span>
<span class="lineno"> 5</span>         <span class="n">_someTextField</span> <span class="o">=</span> <span class="p">[[</span><span class="n">SAMTextField</span> <span class="n">alloc</span><span class="p">]</span>
<span class="lineno"> 6</span>         <span class="nl">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mf">10.0f</span><span class="p">,</span> <span class="mf">00.0f</span><span class="p">,</span> <span class="p">[[</span><span class="nb">self</span> <span class="k">class</span><span class="p">]</span> <span class="n">textFieldWidth</span><span class="p">],</span> <span class="mf">70.0f</span><span class="p">)];</span>
<span class="lineno"> 7</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">keyboardType</span> <span class="o">=</span> <span class="n">UIKeyboardTypeEmailAddress</span><span class="p">;</span>
<span class="lineno"> 8</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">autocapitalizationType</span> <span class="o">=</span> <span class="n">UITextAutocapitalizationTypeNone</span><span class="p">;</span>
<span class="lineno"> 9</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">autocorrectionType</span> <span class="o">=</span> <span class="n">UITextAutocorrectionTypeNo</span><span class="p">;</span>
<span class="lineno">10</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">contentVerticalAlignment</span> <span class="o">=</span> <span class="n">UIControlContentVerticalAlignmentCenter</span><span class="p">;</span>
<span class="lineno">11</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">returnKeyType</span> <span class="o">=</span> <span class="n">UIReturnKeyNext</span><span class="p">;</span>
<span class="lineno">12</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
<span class="lineno">13</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s">@&quot;First Name&quot;</span><span class="p">;</span>
<span class="lineno">14</span>         <span class="n">_someTextField</span><span class="p">.</span><span class="n">borderStyle</span><span class="o">=</span><span class="n">UITextBorderStyleNone</span><span class="p">;</span>
<span class="lineno">15</span>     <span class="p">}</span>
<span class="lineno">16</span>     <span class="k">return</span> <span class="n">_someTextField</span><span class="p">;</span>
<span class="lineno">17</span> <span class="p">}</span>
<span class="lineno">18</span> 
<span class="lineno">19</span> <span class="p">-(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">textField:</span><span class="p">(</span><span class="bp">UITextField</span> <span class="o">*</span><span class="p">)</span><span class="nv">textField</span>
<span class="lineno">20</span> <span class="nf">shouldChangeCharactersInRange:</span><span class="p">(</span><span class="n">NSRange</span><span class="p">)</span><span class="nv">range</span> <span class="nf">replacementString:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">string</span>
<span class="lineno">21</span> <span class="p">{</span>
<span class="lineno">22</span>     <span class="k">if</span><span class="p">(</span><span class="n">textField</span> <span class="o">==</span> <span class="nb">self</span><span class="p">.</span><span class="n">firstName</span> <span class="p">){</span>
<span class="lineno">23</span>         <span class="bp">NSString</span><span class="o">*</span> <span class="n">currentText</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">firstName</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
<span class="lineno">24</span>         <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span><span class="nb">self</span><span class="p">.</span><span class="n">someTextField</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="lineno">25</span>     <span class="p">}</span>
<span class="lineno">26</span>     <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="lineno">27</span> <span class="p">}</span>
<span class="lineno">28</span> 
<span class="lineno">29</span> <span class="k">@end</span></code></pre></div>

<p>Now letâ€™s see how delegation works. When I am defining the text field, you will see on <code>line 12</code> that I am setting my class <code>SomeClass</code> to be the delegate of the text field. This is me telling SAMTextField to send any protocol message from <code>UITextFieldDelegate</code> and <code>UITextViewDelegate</code> to the instance of <code>SomeClass</code>.</p>

<p>Finally, I define instance methods of any of the protocol messages I want to receive data from. In this case, I define <code>shouldChangeCharactersInRange</code>, which is a part of <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/index.html">UITextFieldDelete</a></p>

<p>From the documentation:</p>

<pre><code>The text field calls this method whenever the user types a new
character in the text field or deletes an existing character.
</code></pre>

	</article>
    
    <script>
        mixpanel.track("Delegation in iOS");
    </script>
    
</div>
			</div>
		</div>
		<footer class="site-footer">
	<div class="wrap">
		<div class="footer-col-1 column">
			<ul>
				<li>Math, CS, Statsitics, and the occasional book review</li>
				<li>
					<a href="mailto:"></a>
				</li>
			</ul>
		</div>
		
		<div class="footer-col-2 column">
			<ul>
				<li>
					<a class="icons icon-signup" href="/feed.xml"></a>
				</li>
				
				<li>
					<a class="icons icon-github2" href="https://github.com/">
						<span class="username"></span>
					</a>
				</li>
				
				<li>
					<a class="icons icon-twitter" href="https://twitter.com/">
						<span class="username"></span>
					</a>
				</li>
			</ul>
		</div>
		
		<div class="footer-col-3 column">
			<p class="text">Joe is a software engineer living in lower manhattan that specializes in machine learning, statistics, python, and computer vision.</p>
		</div>
	</div>
</footer>
	</body>
</html>